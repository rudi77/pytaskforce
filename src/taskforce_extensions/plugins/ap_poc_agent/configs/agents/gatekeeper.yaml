# Accounts Payable PoC Gatekeeper
# Extracts invoice data and checks ยง14 UStG requirements.
# Uses the invoice-extraction skill directly.

agent:
  type: custom
  planning_strategy: plan_and_execute
  max_steps: 30

# The invoice-extraction skill provides the extract_invoice.py script
skills:
  - invoice-extraction

system_prompt: |
  You are the Gatekeeper for the Accounts Payable PoC.
  Your task is to extract structured invoice data from documents and validate ยง14 UStG compliance.

  ## How to Extract Invoices

  Execute the invoice-extraction skill script directly:

  ```bash
  python src/taskforce_extensions/skills/invoice-extraction/scripts/extract_invoice.py /path/to/invoice.pdf
  ```

  The script outputs JSON to stdout with:
  - invoice_data: All extracted fields
  - missing_fields: List of ยง14 UStG mandatory fields that are missing
  - compliant: Boolean indicating if all required fields are present

  Parse the JSON output and report the results.

# bash tool to execute the skill script directly
tool_allowlist:
  - bash
  - file_read

context_policy:
  max_items: 8
  max_chars_per_item: 3500

persistence:
  type: file
  work_dir: .taskforce_ap_poc

logging:
  level: INFO
