# RAG Agent Development Configuration
# This configuration creates an agent specialized for document retrieval and semantic search

profile: rag_agent
specialist: rag

# Persistence configuration
persistence:
  type: file  # Use file-based state manager for development
  work_dir: .taskforce_rag  # Working directory for RAG agent states

# LLM configuration
llm:
  config_path: configs/llm_config.yaml  # Path to LLM config
  default_model: powerful-1  # Use gpt-4.1 (powerful-1/gpt-5-1 deployment not available)

# RAG configuration
# RAG tools read directly from environment variables (see AzureSearchBase)
rag:
  # Required environment variables:
  # - AZURE_SEARCH_ENDPOINT: https://your-service.search.windows.net
  # - AZURE_SEARCH_API_KEY: your-api-key
  # 
  # Optional environment variables (with defaults):
  # - AZURE_SEARCH_CONTENT_INDEX: content-blocks (default) - for semantic search
  # - AZURE_SEARCH_DOCUMENTS_INDEX: documents-metadata (default) - for document listing
  #
  # Example .env file:
  # AZURE_SEARCH_ENDPOINT=https://ms-ai-search-dev-01.search.windows.net
  # AZURE_SEARCH_API_KEY=your-key
  # AZURE_SEARCH_CONTENT_INDEX=multimodal-rag-test-gpt5-with-hash

# Logging configuration
logging:
  level: DEBUG  # Verbose logging for development
  format: console  # Human-readable console output

# Agent configuration
agent:
  enable_fast_path: true  # Enable fast-path for follow-up queries
  max_steps: 80  # RAG agents need more steps for document retrieval + summarization (default: 30)
  router:
    use_llm_classification: true  # Use LLM for better accuracy in prod
    max_follow_up_length: 100  # Max query length for follow-up classification


# Tool configuration for RAG agent
# RAG agent includes semantic search tools plus standard tools
tools:
  # RAG-specific tools
  - rag_semantic_search
  
  - rag_list_documents
  
  - rag_get_document

  - global_document_analysis
  
  # Standard tools
  - llm
  
  - python
  
  - file_read
  
  - file_write
  
  - powershell
  
  - ask_user

# Long-term Memory Configuration (via MCP)
# Enables persistent memory across sessions for this agent profile
mcp_servers:
  - type: stdio
    command: npx
    args:
      - "-y"
      - "@modelcontextprotocol/server-memory"
    env:
      MEMORY_FILE_PATH: ".taskforce_rag/.memory/knowledge_graph.jsonl"
    description: "Long-term knowledge graph memory for persistent context across sessions"

# Example: Azure DevOps Wiki MCP Server (commented out)
#  - type: stdio
#    command: npx
#    args:
#      - "-y"
#      - "azure-devops-wiki-mcp"
#    env:
#      AZURE_DEVOPS_URL: "https://dev.azure.com/blumatix"
#      AZURE_DEVOPS_PROJECT: "Rechnungserkennung"
#      AZURE_DEVOPS_PAT: ""
#      AZURE_DEVOPS_ORGANIZATION: "blumatix"
#    description: "Azure DevOps Wiki integration"
