# RAG Agent Development Configuration
# This configuration creates an agent specialized for document retrieval and semantic search

profile: rag_agent
specialist: rag

# Persistence configuration
persistence:
  type: file  # Use file-based state manager for development
  work_dir: .taskforce_rag  # Working directory for RAG agent states

# LLM configuration
llm:
  config_path: configs/llm_config.yaml  # Path to LLM config
  default_model: powerful-1  # Use gpt-4.1 (powerful-1/gpt-5-1 deployment not available)

# RAG configuration
# RAG tools read directly from environment variables (see AzureSearchBase)
rag:
  # Required environment variables:
  # - AZURE_SEARCH_ENDPOINT: https://your-service.search.windows.net
  # - AZURE_SEARCH_API_KEY: your-api-key
  # 
  # Optional environment variables (with defaults):
  # - AZURE_SEARCH_CONTENT_INDEX: content-blocks (default) - for semantic search
  # - AZURE_SEARCH_DOCUMENTS_INDEX: documents-metadata (default) - for document listing
  #
  # Example .env file:
  # AZURE_SEARCH_ENDPOINT=https://ms-ai-search-dev-01.search.windows.net
  # AZURE_SEARCH_API_KEY=your-key
  # AZURE_SEARCH_CONTENT_INDEX=multimodal-rag-test-gpt5-with-hash

# Logging configuration
logging:
  level: DEBUG  # Verbose logging for development
  format: console  # Human-readable console output

# Agent configuration
agent:
  enable_fast_path: true  # Enable fast-path for follow-up queries
  max_steps: 80  # RAG agents need more steps for document retrieval + summarization (default: 30)
  router:
    use_llm_classification: true  # Use LLM for better accuracy in prod
    max_follow_up_length: 100  # Max query length for follow-up classification


# Tool configuration for RAG agent
# RAG agent includes semantic search tools plus standard tools
tools:
  # RAG-specific tools
  - type: SemanticSearchTool
    module: taskforce.infrastructure.tools.rag.semantic_search
    params:
      user_context:
        user_id: "default_user"
        org_id: "default_org"
        scope: "shared"
  
  - type: ListDocumentsTool
    module: taskforce.infrastructure.tools.rag.list_documents
    params:
      user_context:
        user_id: "default_user"
        org_id: "default_org"
        scope: "shared"
  
  - type: GetDocumentTool
    module: taskforce.infrastructure.tools.rag.get_document
    params:
      user_context:
        user_id: "default_user"
        org_id: "default_org"
        scope: "shared"

  - type: GlobalDocumentAnalysisTool
    module: taskforce.infrastructure.tools.rag.global_document_analysis
    params:
      user_context:
        user_id: "default_user"
        org_id: "default_org"
        scope: "shared"
  
  # Standard tools
  - type: LLMTool
    module: taskforce.infrastructure.tools.native.llm_tool
    params:
      model_alias: "powerful-1"  # Use powerful model for RAG agent
  
  - type: PythonTool
    module: taskforce.infrastructure.tools.native.python_tool
    params: {}
  
  - type: FileReadTool
    module: taskforce.infrastructure.tools.native.file_tools
    params: {}
  
  - type: FileWriteTool
    module: taskforce.infrastructure.tools.native.file_tools
    params: {}
  
  - type: PowerShellTool
    module: taskforce.infrastructure.tools.native.shell_tool
    params: {}
  
  - type: AskUserTool
    module: taskforce.infrastructure.tools.native.ask_user_tool
    params: {}

# mcp_servers:
#   - type: stdio
#     command: npx
#     args:
#       - "-y"
#       - "azure-devops-wiki-mcp"
#     env:
#       AZURE_DEVOPS_URL: "https://dev.azure.com/blumatix"
#       AZURE_DEVOPS_PROJECT: "Rechnungserkennung"
#       AZURE_DEVOPS_PAT: ""
#       AZURE_DEVOPS_ORGANIZATION: "blumatix"