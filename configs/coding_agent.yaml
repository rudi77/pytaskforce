# Coding Agent Development Configuration
# Specialized agent for software development tasks

profile: coding_agent
specialist: coding  # Determines system prompt (Kernel + Coding Specialist)

# Persistence configuration
persistence:
  type: file
  work_dir: .taskforce_coding

# Agent configuration
agent:
  enable_fast_path: true  # Enable fast-path for follow-up queries
  router:
    use_llm_classification: true  # Use LLM for better accuracy in prod
    max_follow_up_length: 100  # Max query length for follow-up classification


# LLM configuration
llm:
  config_path: configs/llm_config.yaml
  default_model: main

# Logging configuration
logging:
  level: DEBUG
  format: console

# Context Policy configuration (Story 9.2)
# Controls budgeting for context pack injection before LLM calls
context_policy:
  max_items: 10                      # Maximum number of items in context pack
  max_chars_per_item: 500            # Maximum characters per individual item
  max_total_chars: 3000              # Maximum total characters across all items
  include_latest_tool_previews_n: 5  # Number of latest tool previews to include
  allow_tools: null                  # null = all tools allowed, or list of tool names
  allow_selectors:                   # Selector types to use (MVP: first_chars)
    - first_chars

# Tool configuration for coding agent
# These tools override the specialist defaults when defined
tools:
  - type: FileReadTool
    module: taskforce.infrastructure.tools.native.file_tools
    params: {}

  - type: FileWriteTool
    module: taskforce.infrastructure.tools.native.file_tools
    params: {}

  - type: PowerShellTool
    module: taskforce.infrastructure.tools.native.shell_tool
    params: {}

  - type: AskUserTool
    module: taskforce.infrastructure.tools.native.ask_user_tool
    params: {}

  - type: LLMTool
    module: taskforce.infrastructure.tools.native.llm_tool
    params:
      model_alias: "main"  # Use main model for LLM tool    

  # Optional: Add more tools as needed
  - type: GitTool
    module: taskforce.infrastructure.tools.native.git_tools
    params: {}
  
  - type: PythonTool
    module: taskforce.infrastructure.tools.native.python_tool
    params: {}
